<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mybatisStore.store.repository.StoreMapper">

    <insert id="insertStore" parameterType="com.example.mybatisStore.store.entity.Store">
        INSERT INTO store (product_name, category_enum ,product_content, product_image, prices)
        VALUES (#{productName}, #{categoryEnum},#{productContent}, #{productImage}, #{prices})
        <selectKey keyProperty="productId" resultType="java.lang.Long" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>

    <update id="updateStore" parameterType="com.example.mybatisStore.store.entity.Store">
    <![CDATA[
        UPDATE store
        SET product_name    = #{productName},
            category_enum   = #{categoryEnum},
            product_content = #{productContent},
            product_image   = #{productImage},
            prices          = #{prices}
        WHERE product_id = #{productId}
        ]]>
    </update>
    
    <select id="getStoresByCategory" parameterType="com.example.mybatisStore.store.entity.Store">
        SELECT * FROM store WHERE category_enum = #{categoryEnum}
    </select>


</mapper>

